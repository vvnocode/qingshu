+++
date = '2025-01-09T17:44:00+08:00'
draft = false
title = 'Java9之后内码为什么由UTF-16改为UTF-8'
tags = ['Java', '编码', 'UTF-8', 'UTF-16', 'JDK9']
+++
## 扩展性更强

UTF-8采用可变长度设计，长度为1-6个字节。UTF-16也为可变长设计，长度为2|4字节。UTF-8编码更加灵活和可扩展，能够支持未来出现的新字符和符号。

在之前的Java（9以前）版本中，Java平台采用的是16位Unicode编码（UTF-16）来表示字符和字符串，这种编码方式使用一个或两个16位的code units表示一个Unicode字符。虽然UTF-16编码可以表示所有的Unicode字符，但它并没有完全解决Unicode字符集的扩展问题。如果将来有新的Unicode字符需要添加到字符集中，可能需要修改UTF-16编码方案，从而导致兼容性和可移植性问题。

## 兼容性更好

UTF-8是一种非常广泛使用的字符编码方案，被支持和应用于众多操作系统、程序和协议中。使用UTF-8作为内部编码，可以更好地与其他系统和组件进行交互，并避免出现兼容性问题。

尽管Java平台之前采用的UTF-16编码也被广泛支持和应用，但在某些情况下，如文本传输和存储等场景，UTF-8编码具有更好的兼容性和互操作性。此外，许多开发人员在编写Java程序时也会使用UTF-8编码，因此将Java平台的内部编码改为UTF-8可以方便开发人员进行文本处理和编程。

## 更节省空间

相比于UTF-16编码，UTF-8编码在存储英文字符和标点符号等ASCII字符时，只需要使用一个字节，而不是两个字节。这样可以在存储和传输文本数据时节省空间和带宽。在处理大量字符串时可以节省内存使用。

尤其是在存储大量英文字符和标点符号的场景下，UTF-8编码能够显著地减少存储和传输的数据量，提高系统的效率和性能。

## 提高性能

Java9的String的内部value数组由char数组类型改为byte数字类型。byte占用空间为char的一半，这意味着更多的数据可以缓存在CPU缓存中，从而加速字符串操作的执行速度。

